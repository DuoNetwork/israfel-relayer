import * as CST from './constants';
import firebaseUtil from './firebaseUtil';
import orderWatcherUtil from './utils/orderWatcherUtil';

const mainAsync = async () => {
	firebaseUtil.init();
	orderWatcherUtil.subscribeOrderWatcher();
	const orders = await firebaseUtil.getOrders();
	console.log(orders.length);
	setTimeout(() => orderWatcherUtil.pruneOrders(orders), CST.PRUNE_INTERVAL);
	orderWatcherUtil.unsubOrderWatcher();
};
mainAsync().catch(console.error);
